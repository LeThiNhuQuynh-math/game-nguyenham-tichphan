<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√în t·∫≠p Nguy√™n h√†m - T√≠ch ph√¢n</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        :root {
            --primary: #1e88e5;
            --success: #4caf50;
            --error: #f44336;
            --bg: #f5f7fa;
            --text: #2c3e50;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            background: white;
            width: 100%;
            max-width: 700px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
            padding: 30px;
        }

        .header {
            text-align: center;
            margin-bottom: 25px;
        }

        .header h1 {
            color: var(--primary);
            font-size: 24px;
            margin: 0;
        }

        #stats {
            color: #7f8c8d;
            font-size: 14px;
            margin-top: 5px;
        }

        /* Thanh ti·∫øn tr√¨nh */
        .progress-container {
            background: #ecf0f1;
            height: 10px;
            border-radius: 5px;
            margin-bottom: 30px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #1e88e5, #42a5f5);
            width: 0%;
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .question-box {
            font-size: 1.25rem;
            font-weight: 500;
            color: var(--text);
            margin-bottom: 25px;
            line-height: 1.6;
            text-align: left;
        }

        .options-grid {
            display: grid;
            gap: 15px;
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 15px 20px;
            border-radius: 12px;
            font-size: 1.1rem;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            display: flex;
            align-items: center;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--primary);
            background-color: #f0f7ff;
        }

        .option-btn.correct {
            background-color: var(--success) !important;
            color: white !important;
            border-color: var(--success) !important;
        }

        .option-btn.wrong {
            background-color: var(--error) !important;
            color: white !important;
            border-color: var(--error) !important;
        }

        #feedback {
            text-align: center;
            height: 30px;
            margin-top: 20px;
            font-weight: bold;
            font-size: 1.1rem;
        }

        #controls {
            margin-top: 30px;
            text-align: center;
        }

        .next-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 40px;
            border-radius: 30px;
            font-size: 1rem;
            cursor: pointer;
            display: none;
            transition: transform 0.2s;
        }

        .next-btn:hover {
            transform: scale(1.05);
            filter: brightness(1.1);
        }

        .result-screen {
            text-align: center;
            padding: 40px 0;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>To√°n 12: Nguy√™n h√†m - T√≠ch ph√¢n</h1>
        <div id="stats">C√¢u h·ªèi 1/5</div>
    </div>

    <div class="progress-container">
        <div id="progress-bar" class="progress-bar"></div>
    </div>

    <div id="quiz-area">
        <div class="question-box" id="question">
            ƒêang t·∫£i c√¢u h·ªèi...
        </div>

        <div class="options-grid" id="options">
            </div>

        <div id="feedback"></div>

        <div id="controls">
            <button id="next-btn" class="next-btn">C√¢u ti·∫øp theo</button>
        </div>
    </div>
</div>

<script>
    // DANH S√ÅCH C√ÇU H·ªéI
    const quizData = [
        {
            q: "T√¨m nguy√™n h√†m c·ªßa h√†m s·ªë \( f(x) = \frac{1}{\cos^2 x} \)?",
            options: ["\( \tan x + C \)", "\( -\tan x + C \)", "\( \cot x + C \)", "\( -\cot x + C \)"],
            answer: 0
        },
        {
            q: "T√≠nh t√≠ch ph√¢n \( I = \int_0^1 (x^2 + 1) dx \)?",
            options: ["\( \frac{4}{3} \)", "\( 1 \)", "\( \frac{2}{3} \)", "\( 2 \)"],
            answer: 0
        },
        {
            q: "T√≠nh nguy√™n h√†m \( \int \frac{1}{x} dx \) tr√™n kho·∫£ng \( (0; +\infty) \)?",
            options: ["\( \ln x + C \)", "\( -\frac{1}{x^2} + C \)", "\( e^x + C \)", "\( \frac{1}{x^2} + C \)"],
            answer: 0
        },
        {
            q: "Cho \( \int_0^2 f(x)dx = 3 \). T√≠nh \( \int_0^2 2f(x)dx \)?",
            options: ["\( 6 \)", "\( 3 \)", "\( 5 \)", "\( 1 \)"],
            answer: 0
        },
        {
            q: "H√†m s·ªë n√†o l√† m·ªôt nguy√™n h√†m c·ªßa \( f(x) = e^x \)?",
            options: ["\( e^x \)", "\( x e^{x-1} \)", "\( \frac{e^{x+1}}{x+1} \)", "\( e^{-x} \)"],
            answer: 0
        }
    ];

    let currentIdx = 0;
    let score = 0;
    let answered = false;

    function initQuiz() {
        answered = false;
        const currentData = quizData[currentIdx];
        
        // C·∫≠p nh·∫≠t th·ªëng k√™
        document.getElementById("stats").innerText = `C√¢u h·ªèi ${currentIdx + 1}/${quizData.length}`;
        document.getElementById("progress-bar").style.width = `${((currentIdx + 1) / quizData.length) * 100}%`;
        
        // Hi·ªÉn th·ªã c√¢u h·ªèi
        document.getElementById("question").innerHTML = currentData.q;
        document.getElementById("feedback").innerText = "";
        document.getElementById("next-btn").style.display = "none";

        // Hi·ªÉn th·ªã ƒë√°p √°n
        const optionsContainer = document.getElementById("options");
        optionsContainer.innerHTML = "";
        
        currentData.options.forEach((opt, i) => {
            const btn = document.createElement("button");
            btn.className = "option-btn";
            btn.innerHTML = `<b style="margin-right:12px">${String.fromCharCode(65 + i)}.</b> ${opt}`;
            btn.onclick = () => selectOption(i, btn);
            optionsContainer.appendChild(btn);
        });

        // G·ªçi MathJax render l·∫°i c√¥ng th·ª©c
        if (window.MathJax) {
            MathJax.typesetPromise();
        }
    }

    function selectOption(idx, btn) {
        if (answered) return;
        answered = true;

        const correctIdx = quizData[currentIdx].answer;
        const allBtns = document.querySelectorAll(".option-btn");

        if (idx === correctIdx) {
            btn.classList.add("correct");
            document.getElementById("feedback").innerHTML = "<span style='color:var(--success)'>Ch√≠nh x√°c! üéâ</span>";
            score++;
        } else {
            btn.classList.add("wrong");
            allBtns[correctIdx].classList.add("correct");
            document.getElementById("feedback").innerHTML = "<span style='color:var(--error)'>R·∫•t ti·∫øc, b·∫°n ƒë√£ ch·ªçn sai!</span>";
        }

        document.getElementById("next-btn").style.display = "inline-block";
    }

    document.getElementById("next-btn").onclick = () => {
        currentIdx++;
        if (currentIdx < quizData.length) {
            initQuiz();
        } else {
            showResult();
        }
    };

    function showResult() {
        const area = document.getElementById("quiz-area");
        area.innerHTML = `
            <div class="result-screen">
                <h2>K·∫øt qu·∫£ b√†i t·∫≠p</h2>
                <div style="font-size: 3rem; margin: 20px 0;">${score}/${quizData.length}</div>
                <p>B·∫°n ƒë√£ ho√†n th√†nh b√†i √¥n t·∫≠p n√†y!</p>
                <button onclick="location.reload()" class="next-btn" style="display:inline-block">L√†m l·∫°i b√†i t·∫≠p</button>
            </div>
        `;
    }

    window.onload = initQuiz;
</script>
</body>
</html>
